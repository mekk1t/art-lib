@model KitProjects.ChoiceVisualizer.Models.SemiFinalsViewModel
<script src="~/js/fix.js"></script>

<div id="test-carousel" class="carousel slide text-center" data-ride="false" data-interval="false" >
    <form enctype="multipart/form-data" asp-controller="FilmChoice" asp-action="SemiFinals" method="post" class="carousel-inner">
        @{
            ViewBag.ChoicesArrayName = nameof(Model.FirstPair);
            await Html.RenderPartialAsync("_Half", Model.FirstPair);
        }
        @{
            ViewBag.ChoicesArrayName = nameof(Model.SecondPair);
            await Html.RenderPartialAsync("_Half", Model.SecondPair);
        }
        <div class="carousel-item active">
            <div>
                <div style="display: flex; flex-direction:row; justify-content:space-between;">
                    @{
                        string firstImage = $"data:{Model.FirstPair[0].Choice.Image.ContentType};base64, {Model.FirstPair[0].Choice.Image.Base64}";
                        string secondImage = $"data:{Model.FirstPair[1].Choice.Image.ContentType};base64, {Model.FirstPair[1].Choice.Image.Base64}";
                        string firstImageId = Model.FirstPair[0].Choice.Title;
                        string secondImageId = Model.FirstPair[1].Choice.Title;
                    }
                    <figure>
                        <label for="@firstImageId" class="form-check-label">
                            <img height="200" src="@firstImage" alt="Картинка" />
                        </label>
                        <figcaption>
                            <input id="@firstImageId" class="form-check-input" name="FirstPair[0].Selected" type="checkbox" value="true" />
                            @Model.FirstPair[0].Choice.Title
                            <br />
                        </figcaption>
                    </figure>
                    <figure>
                        <label for="@secondImageId" class="form-check-label">
                            <img height="200" src="@secondImage" alt="Картинка" />
                        </label>
                        <figcaption>
                            <input id="@secondImageId" class="form-check-input" name="FirstPair[1].Selected" type="checkbox" value="true" />
                            @Model.FirstPair[1].Choice.Title
                        </figcaption>
                    </figure>
                </div>
            </div>
            <input type="hidden" name="FirstPair[0].Choice.Title" value="@Model.FirstPair[0].Choice.Title" />
            <input type="hidden" name="FirstPair[0].Choice.Image.Base64" value="@Model.FirstPair[0].Choice.Image.Base64" />
            <input type="hidden" name="FirstPair[0].Choice.Image.ContentType" value="@Model.FirstPair[0].Choice.Image.ContentType" />
            <input type="hidden" name="FirstPair[0].Choice.Image.Link" value="@Model.FirstPair[0].Choice.Image.Link" />
            <input type="hidden" name="FirstPair[1].Choice.Title" value="@Model.FirstPair[1].Choice.Title" />
            <input type="hidden" name="FirstPair[1].Choice.Image.Base64" value="@Model.FirstPair[1].Choice.Image.Base64" />
            <input type="hidden" name="FirstPair[1].Choice.Image.ContentType" value="@Model.FirstPair[1].Choice.Image.ContentType" />
            <input type="hidden" name="FirstPair[1].Choice.Image.Link" value="@Model.FirstPair[1].Choice.Image.Link" />
        </div>
        <div class="carousel-item">
            <div>
                <div style="display: flex; flex-direction:row; justify-content:space-between;">
                    @{
                        string _firstImage = $"data:{Model.SecondPair[0].Choice.Image.ContentType};base64, {Model.SecondPair[0].Choice.Image.Base64}";
                        string _secondImage = $"data:{Model.SecondPair[1].Choice.Image.ContentType};base64, {Model.SecondPair[1].Choice.Image.Base64}";
                        string _firstImageId = Model.SecondPair[0].Choice.Title;
                        string _secondImageId = Model.SecondPair[1].Choice.Title;
                    }
                    <figure>
                        <label class="form-check-label" for="@_firstImageId">
                            <img height="200" src="@_firstImage" alt="Картинка" />
                        </label>
                        <figcaption>
                            <input id="@_firstImageId" class="form-check-input" name="SecondPair[0].Selected" type="checkbox" value="true" />
                            @Model.SecondPair[0].Choice.Title<br />
                        </figcaption>
                    </figure>
                    <figure>
                        <label class="form-check-label" for="@_secondImageId">
                            <img height="200" src="@_secondImage" alt="Картинка" />
                        </label>
                        <figcaption>
                            <input id="@_secondImageId" class="form-check-input" name="SecondPair[1].Selected" type="checkbox" value="true" />
                            @Model.SecondPair[1].Choice.Title
                        </figcaption>
                    </figure>
                </div>
            </div>
            <input type="hidden" name="SecondPair[0].Choice.Title" value="@Model.SecondPair[0].Choice.Title" />
            <input type="hidden" name="SecondPair[0].Choice.Image.Base64" value="@Model.SecondPair[0].Choice.Image.Base64" />
            <input type="hidden" name="SecondPair[0].Choice.Image.ContentType" value="@Model.SecondPair[0].Choice.Image.ContentType" />
            <input type="hidden" name="SecondPair[0].Choice.Image.Link" value="@Model.SecondPair[0].Choice.Image.Link" />
            <input type="hidden" name="SecondPair[1].Choice.Title" value="@Model.SecondPair[1].Choice.Title" />
            <input type="hidden" name="SecondPair[1].Choice.Image.Base64" value="@Model.SecondPair[1].Choice.Image.Base64" />
            <input type="hidden" name="SecondPair[1].Choice.Image.ContentType" value="@Model.SecondPair[1].Choice.Image.ContentType" />
            <input type="hidden" name="SecondPair[1].Choice.Image.Link" value="@Model.SecondPair[1].Choice.Image.Link" />
        </div>

        <input id="submit-test" type="submit" style="display: none;" />
        <a class="carousel-control-prev" href="#test-carousel" role="button" data-slide="prev">
            <span class="btn btn-info">Назад</span>
        </a>
        <a class="carousel-control-next" href="#test-carousel" role="button" data-slide="next">
            <span class="btn btn-info">Дальше</span>
        </a>
    </form>
</div>
<button class="submit-test-button btn btn-success" onclick="document.getElementById('submit-test').click()">Готово!</button>
<script>fixCarouselItems();</script>